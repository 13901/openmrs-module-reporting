<?xml version="1.0" encoding="UTF-8"?>

	<!-- Beans to add to the current Web Application context definition -->

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd
           http://www.springframework.org/schema/util
           http://www.springframework.org/schema/util/spring-util-2.0.xsd">

	<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
	<context:component-scan base-package="org.openmrs.module.reporting.web" />


	<!-- Set up URL mappings for new URLs -->
    <bean id="reportingUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    	<property name="order"><value>50</value></property>
    	<property name="mappings">
            <props>
            	<prop key="**/mappedProperty.portlet">mappedPropertyPortletController</prop>
            	<prop key="**/baseMetadata.portlet">parameterizablePortletController</prop>
				<prop key="module/reporting/newIndicator.form">indicatorFormController</prop>
			</props>
		</property>
	</bean>	
	
	<bean id="indicatorFormValidator" class="org.openmrs.module.reporting.web.validator.IndicatorFormValidator"/>
	<bean id="indicatorFormController" class="org.openmrs.module.reporting.web.controller.IndicatorFormController">
		<property name="validator" ref="indicatorFormValidator"/>
	</bean>
	
	<bean id="parameterizablePortletController" class="org.openmrs.module.reporting.web.controller.ParameterizablePortletController" />
	<bean id="mappedPropertyPortletController" class="org.openmrs.module.reporting.web.controller.MappedPropertyPortletController" />

<!--  
 	<bean id="exceptionResolver"
		class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
		<property name="exceptionMappings">
           <props>
                <prop key="org.openmrs.api.db.DAOException">module/reporting/common/dataAccessFailure</prop>
                <prop key="org.openmrs.api.APIException">module/reporting/common/apiFailure</prop>
                <prop key="java.lang.Exception">module/reporting/common/generalFailure</prop>
         	</props>
        </property>				
		<property name="defaultErrorView" value="generalFailure" />
	</bean>
-->

</beans>
